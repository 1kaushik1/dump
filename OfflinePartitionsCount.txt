path="$(find / -name  kafka-run-class.sh )"
#echo "the path is $path"
#$path kafka.tools.JmxTool --object-name kafka.controller:type=KafkaController,name=OfflinePartitionsCount   --reporting-interval 5000

data="$(timeout 3s $path kafka.tools.JmxTool --object-name kafka.controller:type=KafkaController,name=OfflinePartitionsCount   --reporting-interval 5000 | tail -n1 | awk -F ',' '{print $2}' )"

data2="$(timeout 3s $path kafka.tools.JmxTool --object-name  kafka.controller:type=KafkaController,name=OfflinePartitionsCount   --reporting-interval 5000 )"

if [ $data -eq 0  ]; then
echo "OK - $data2"
exit 0
else
echo "CRITICAL - $data2"
exit 2
fi
